/*!
 * Skeleton Media - v1.3.0 (https://github.com/bkader/skeleton)
 * Copyright 2018 Kader Bouyakoub (https://github.com/bkader)
 * Licensed under MIT (https://github.com/bkader/skeleton/blob/develop/LICENSE.md)
 */
/*!
 * Skeleton Media - v1.3.0 (https://github.com/bkader/skeleton)
 * Copyright 2018 Kader Bouyakoub (https://github.com/bkader)
 * Licensed under MIT (https://github.com/bkader/skeleton/blob/develop/LICENSE.md)
 */
!function(t,o){t.noConflict();var n=t("[data-dropzone]"),a=n.attr("data-upload-url"),e=window.location.origin+window.location.pathname;t(document).on("click",".media-view",function(o){o.preventDefault();var n=t(this).attr("data-href");t("#wrapper").load(n+" #wrapper > *",function(){window.history.pushState({href:n},"",n),t("#media-modal").modal("show")})}),t(document).on("click",".media-close",function(o){o.preventDefault(),t("#media-modal").modal("hide").on("hidden.bs.modal",function(t){window.history.pushState({href:e},"",e)})}),t(document).on("click",".media-delete",function(o){o.preventDefault();var n=t(this),a=n.attr("data-alert")||"Are you sure?",r=n.attr("data-href");confirm(a)&&t.ajax({method:"DELETE",type:"DELETE",url:r,cache:!1,async:!0,success:function(o,n,a){t("#media-modal").modal("hide"),toastr.success(o),t("#wrapper").load(window.location.href+" #wrapper > *"),window.history.pushState({href:e},"",e)},error:function(t,o,n){toastr.error(o)}})}),t(document).on("submit","form[data-update]",function(o){o.preventDefault();var n=t(this),a=n.attr("action"),e={name:t.trim(n.find("#name").val()),description:t.trim(n.find("#description").val())};t.post(a,e,function(t,o,n){toastr.success(t)},"json").fail(function(t,o,n){toastr.error(t.responseJSON)})}),t(document).ready(function(){new Dropzone("[data-dropzone]",{url:a,init:function(){this.on("sending",function(t,o,n){n.append("action","upload")})},success:function(t,o){n.load(window.location.href+" [data-dropzone] .attachments"),toastr.success(o)},error:function(t,o,n){toastr.error(o)}})})}(jQuery);
